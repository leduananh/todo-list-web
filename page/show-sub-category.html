<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    
    <h1 id="show-sub category"></h1>
    
        <div>
            <h1>Trang load danh sách danh mục con</h1>
        </div>
        <div style="padding: 20px;">
            <ul id="danh-muc-con"></ul>
        </div>
    
    <script type="module">
        import { subCategoryService } from '../src/service/subCategoryService.js'
        import { categoryService } from '../src/service/categoryService.js'
        import { commonUtil } from '../src/util/common.js'
        import {paramsTemplateMappingUtil } from '../src/util/paramsTemplateMapping.js'
        
        
        window.categoryService = categoryService
        window.subCategoryService = subCategoryService
        window.commonUtil = commonUtil

        let params = new URL(document.location.toString()).searchParams;
        let categoryName = params.get('categoryName')
        let listSubCat = subCategoryService.getAllSubCategoryByCategoryName(categoryName)

        
           
        //tạo hàm RenderHTml===================================================================================
        document.addEventListener('DOMContentLoaded', function (e){
            let subCategoryItemHtmlStringTemplate = `
                    <li>
                        <span>  tên danh mục con : </span>
                        <h1>
                        $name$
                        </h1>

                        <span>
                            <a href="/page/edit-sub-category.html?suCategoryName=$name$">edit sub category</a>
                        </span>
                        
                        <span>
                            <a href="/page/delete-sub-category.html?suCategoryName=$name$">delete sub category</a>
                        </span>
                        |
                        <span>
                            <a href="/page/create-new-todo.html?suCategoryName=$name$">create todo</a>
                        </span>
                       
                        <span>
                            <a href="/page/show-todo.html?suCategoryName=$name$">show todo</a>
                        </span>
                    </li>
                `
            let ct = ''
            // vòng lặp for of
            if (listSubCat.length > 0) {
                for (let subCategory of listSubCat) {
                let subCategoryItemHtml = paramsTemplateMappingUtil.replaceVariables(subCategoryItemHtmlStringTemplate, subCategory)
                ct = ct + subCategoryItemHtml
                }
            }
            if (listSubCat.length === 0) {
                ct = '<h1>No subcategory</h1>'
            }       
                           
            const ulTag = document.querySelector('#danh-muc-con');

            ulTag.innerHTML = ct

        })
 




       
        
        
        
        
        //document.querySelector('#show-sub').innerHTML = `${JSON.stringify(listSubCat)}`
    </script>
</body>

</html>